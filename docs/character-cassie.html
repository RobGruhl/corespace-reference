<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cassie - Character Tracker</title>
    <link rel="stylesheet" href="style.css">
    <style>
        .character-ability {
            background: rgba(83, 168, 182, 0.15);
            border: 2px solid #53a8b6;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
        }
        .ability-title {
            font-weight: bold;
            color: #53a8b6;
            font-size: 1.1em;
            margin-bottom: 8px;
        }
        .passive-summary {
            background: rgba(155, 89, 182, 0.15);
            border: 2px solid #9b59b6;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
        }
        .passive-summary h3 {
            color: #9b59b6;
            margin-top: 0;
            margin-bottom: 10px;
        }
        .passive-item {
            padding: 8px 0;
            border-bottom: 1px solid rgba(155, 89, 182, 0.2);
        }
        .passive-item:last-child {
            border-bottom: none;
        }
        .skill-controls {
            background: rgba(83, 168, 182, 0.1);
            padding: 12px;
            border-radius: 6px;
            margin-bottom: 15px;
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            align-items: center;
        }
        .reset-btn {
            background: rgba(231, 76, 60, 0.3);
            border: 2px solid #e74c3c;
            color: #e74c3c;
            padding: 6px 12px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 0.85em;
            transition: all 0.3s;
        }
        .reset-btn:hover {
            background: rgba(231, 76, 60, 0.5);
        }
        .skill-select {
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid #53a8b6;
            color: #eee;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 0.9em;
            cursor: pointer;
            margin-bottom: 8px;
        }
        .skill-select option {
            background: #1a1a2e;
            color: #eee;
        }
        .action-card.not-learned {
            opacity: 0.3;
            filter: grayscale(0.8);
        }
        .action-card.not-learned .action-card-title {
            text-decoration: line-through;
        }
        .skill-level {
            padding: 8px 12px;
            margin: 5px 0;
            border-radius: 4px;
            border-left: 4px solid;
        }
        .skill-level[data-level="1"] {
            border-left-color: #2ecc71;
            background: rgba(46, 204, 113, 0.1);
        }
        .skill-level[data-level="2"] {
            border-left-color: #f39c12;
            background: rgba(243, 156, 18, 0.1);
        }
        .skill-level[data-level="3"] {
            border-left-color: #e74c3c;
            background: rgba(231, 76, 60, 0.1);
        }
        .skill-level[data-level="passive"] {
            border-left-color: #9b59b6;
            background: rgba(155, 89, 182, 0.1);
        }
        .skill-level.hidden {
            display: none;
        }
        .level-label {
            font-weight: bold;
            margin-right: 8px;
        }
        .level-label[data-level="1"] { color: #2ecc71; }
        .level-label[data-level="2"] { color: #f39c12; }
        .level-label[data-level="3"] { color: #e74c3c; }
        .level-label[data-level="passive"] { color: #9b59b6; }
        @media print {
            .skill-controls, .back-btn, .breadcrumb, .skill-select { display: none; }
            .action-card.not-learned { display: none; }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1><a href="index.html">‚ö° CORE SPACE ‚ö°</a></h1>
            <div class="tagline">Cassie - Character Progression Tracker</div>
        </header>

        <div class="breadcrumb">
            <a href="index.html">Home</a>
            <span>‚Ä∫</span>
            <span>Cassie</span>
        </div>

        <a href="index.html" class="back-btn">‚Üê Back to Hub</a>

        <div class="section">
            <h2>Passive Skills Summary</h2>
            <div class="passive-summary">
                <h3>üîÆ Always Active Abilities</h3>
                <div id="passive-skills-list">
                    <div class="passive-item" data-skill="weaponsexpert" data-min-level="1" style="display: none;">
                        <strong>Weapons Expert 1:</strong> Reload as effortless action
                    </div>
                    <div class="passive-item" data-skill="weaponsexpert" data-min-level="2" style="display: none;">
                        <strong>Weapons Expert 2:</strong> Ranged Assault with pistol as effortless action
                    </div>
                    <div class="passive-item" data-skill="combatexpert" data-min-level="1" style="display: none;">
                        <strong>Combat Expert 1:</strong> Ignore 1 hit in attacks of opportunity
                    </div>
                    <div class="passive-item" data-skill="combatexpert" data-min-level="2" style="display: none;">
                        <strong>Combat Expert 2:</strong> Close Assault as effortless action
                    </div>
                </div>
                <div id="no-passives" style="color: #888; font-style: italic;">
                    No passive abilities learned yet. Passive abilities will appear here as you learn skills.
                </div>
            </div>
        </div>

        <div class="section">
            <h2>Available Reactions</h2>
            <div class="passive-summary" style="border-color: #e67e22;">
                <h3 style="color: #e67e22;">‚ö° Triggered Abilities</h3>
                <div id="reaction-skills-list">
                    <div class="passive-item" data-skill="evade" data-min-level="1" style="display: none;">
                        <strong>Evade 1:</strong> When enemy moves into base contact - Move action
                    </div>
                    <div class="passive-item" data-skill="countershot" data-min-level="1" style="display: none;">
                        <strong>Counter Shot 1:</strong> After targeted with ranged attack - Ranged attack vs attacker
                    </div>
                    <div class="passive-item" data-skill="countershot" data-min-level="2" style="display: none;">
                        <strong>Counter Shot 2:</strong> After enemy's first action - Ranged attack vs that enemy
                    </div>
                    <div class="passive-item" data-skill="countershot" data-min-level="3" style="display: none;">
                        <strong>Counter Shot 3:</strong> At any time - Ranged attack +1 die + Move
                    </div>
                    <div class="passive-item" data-skill="reflexes" data-min-level="1" style="display: none;">
                        <strong>Reflexes 1:</strong> After close assault attack - Ignore all hits
                    </div>
                    <div class="passive-item" data-skill="reflexes" data-min-level="2" style="display: none;">
                        <strong>Reflexes 2:</strong> After close assault attack - Ignore hits + Close Assault +1 die
                    </div>
                    <div class="passive-item" data-skill="reflexes" data-min-level="3" style="display: none;">
                        <strong>Reflexes 3:</strong> After close assault attack - Ignore hits + Close Assault +2 dice + Move
                    </div>
                    <div class="passive-item" data-skill="walkitoff" data-min-level="2" style="display: none;">
                        <strong>Walk It Off 2:</strong> After targeted with attack - Reduce damage by 2
                    </div>
                    <div class="passive-item" data-skill="walkitoff" data-min-level="3" style="display: none;">
                        <strong>Walk It Off 3:</strong> After defeated - Restore 1 Health, Stand Up, Move
                    </div>
                </div>
                <div id="no-reactions" style="color: #888; font-style: italic;">
                    No reaction abilities learned yet. Reaction abilities will appear here as you learn skills.
                </div>
            </div>
        </div>

        <div class="section">
            <h2>Campaign Tracker</h2>
            <div class="skill-controls">
                <div class="info-box" style="margin: 0; flex: 1;">
                    <strong>How to use:</strong> Use the dropdown on each skill card to set your current level. Cards update automatically and your progress is saved!
                </div>
                <button class="reset-btn" onclick="resetAll()">Reset All Skills</button>
            </div>
        </div>

        <div class="section">
            <h2>Cassie's Skills</h2>
            <div class="action-grid">

                <div class="action-card" data-skill="evade">
                    <select class="skill-select" onchange="updateSkill('evade', this.value)">
                        <option value="0">Not Learned</option>
                        <option value="1">Level 1</option>
                    </select>
                    <div class="action-card-title">Evade</div>
                    <div class="action-requirements">Reaction - escape</div>
                    <div>
                        <div class="skill-level" data-level="passive">
                            <span class="level-label" data-level="passive">Trigger:</span>
                            When an enemy moves into base contact with you
                        </div>
                        <div class="skill-level" data-level="1">
                            <span class="level-label" data-level="1">Level 1:</span>
                            Make a Move action, ignoring attacks of opportunity
                        </div>
                    </div>
                </div>

                <div class="action-card" data-skill="weaponsexpert">
                    <select class="skill-select" onchange="updateSkill('weaponsexpert', this.value)">
                        <option value="0">Not Learned</option>
                        <option value="1">Level 1</option>
                        <option value="2">Level 2</option>
                        <option value="3">Level 3</option>
                    </select>
                    <div class="action-card-title">Weapons Expert</div>
                    <div class="action-requirements">Passive + Active - weapon mastery</div>
                    <div>
                        <div class="skill-level" data-level="passive">
                            <span class="level-label" data-level="passive">Passive 1:</span>
                            Reload as effortless action
                        </div>
                        <div class="skill-level" data-level="1">
                            <span class="level-label" data-level="1">Level 1:</span>
                            Ranged attack +2 dice. Cannot Move in same round
                        </div>
                        <div class="skill-level" data-level="passive">
                            <span class="level-label" data-level="passive">Passive 2:</span>
                            Ranged Assault with pistol as effortless action
                        </div>
                        <div class="skill-level" data-level="2">
                            <span class="level-label" data-level="2">Level 2:</span>
                            Fire 2 different pistols as single action - add dice together and subtract one die
                        </div>
                        <div class="skill-level" data-level="3">
                            <span class="level-label" data-level="3">Level 3:</span>
                            [Marine Career] Shoot weapon from enemy's hand - ranged attack, 2 dice regardless of weapon stats, must be in range and LoS. If at least one hit scored, no damage done but weapon of your choice is removed from dashboard and scattered. Weapon is broken but can be Repaired.
                        </div>
                    </div>
                </div>

                <div class="action-card" data-skill="slippery">
                    <select class="skill-select" onchange="updateSkill('slippery', this.value)">
                        <option value="0">Not Learned</option>
                        <option value="1">Level 1</option>
                    </select>
                    <div class="action-card-title">Slippery</div>
                    <div class="action-requirements">Passive - scramble ability</div>
                    <div>
                        <div class="skill-level" data-level="1">
                            <span class="level-label" data-level="1">Level 1:</span>
                            Make a Move action with Scramble +2 (adds +2 to all scramble attempts - see page 31)
                        </div>
                    </div>
                </div>

                <div class="action-card" data-skill="marksman">
                    <select class="skill-select" onchange="updateSkill('marksman', this.value)">
                        <option value="0">Not Learned</option>
                        <option value="1">Level 1</option>
                        <option value="2">Level 2</option>
                        <option value="3">Level 3</option>
                    </select>
                    <div class="action-card-title">Marksman</div>
                    <div class="action-requirements">Active - multi-target specialist</div>
                    <div>
                        <div class="skill-level" data-level="1">
                            <span class="level-label" data-level="1">Level 1:</span>
                            Make a ranged attack
                        </div>
                        <div class="skill-level" data-level="2">
                            <span class="level-label" data-level="2">Level 2:</span>
                            Ranged attack +1 die. Split hits between up to 2 eligible targets within range of weapon and within short range of each other
                        </div>
                        <div class="skill-level" data-level="3">
                            <span class="level-label" data-level="3">Level 3:</span>
                            Ranged attack +2 dice. Split hits between any number of eligible targets within range and within short range of each other
                        </div>
                    </div>
                </div>

                <div class="action-card" data-skill="countershot">
                    <select class="skill-select" onchange="updateSkill('countershot', this.value)">
                        <option value="0">Not Learned</option>
                        <option value="1">Level 1</option>
                        <option value="2">Level 2</option>
                        <option value="3">Level 3</option>
                    </select>
                    <div class="action-card-title">Counter Shot</div>
                    <div class="action-requirements">Reaction - return fire</div>
                    <div>
                        <div class="skill-level" data-level="passive">
                            <span class="level-label" data-level="passive">Trigger:</span>
                            After being targeted with ranged attack
                        </div>
                        <div class="skill-level" data-level="1">
                            <span class="level-label" data-level="1">Level 1:</span>
                            Make ranged attack against attacker
                        </div>
                        <div class="skill-level" data-level="2">
                            <span class="level-label" data-level="2">Level 2:</span>
                            At any time after target enemy has taken first action, make ranged attack against target
                        </div>
                        <div class="skill-level" data-level="3">
                            <span class="level-label" data-level="3">Level 3:</span>
                            At any time, ranged attack +1 die, then make Move action
                        </div>
                    </div>
                </div>

                <div class="action-card" data-skill="combatexpert">
                    <select class="skill-select" onchange="updateSkill('combatexpert', this.value)">
                        <option value="0">Not Learned</option>
                        <option value="1">Level 1</option>
                        <option value="2">Level 2</option>
                        <option value="3">Level 3</option>
                    </select>
                    <div class="action-card-title">Combat Expert</div>
                    <div class="action-requirements">Passive + Active - close combat mastery</div>
                    <div>
                        <div class="skill-level" data-level="passive">
                            <span class="level-label" data-level="passive">Passive 1:</span>
                            Ignore one hit scored against you during any attack of opportunity
                        </div>
                        <div class="skill-level" data-level="1">
                            <span class="level-label" data-level="1">Level 1:</span>
                            Sweep enemy's feet - target enemy in base contact is knocked prone
                        </div>
                        <div class="skill-level" data-level="passive">
                            <span class="level-label" data-level="passive">Passive 2:</span>
                            Close Assault action as effortless action
                        </div>
                        <div class="skill-level" data-level="2">
                            <span class="level-label" data-level="2">Level 2:</span>
                            Use pistol/rifle in close assault - roll using weapon's short range stat, add 2 dice. Uses ammo
                        </div>
                        <div class="skill-level" data-level="3">
                            <span class="level-label" data-level="3">Level 3:</span>
                            Push all engaged enemies up to 2" away (direction of choice, stop at walls). No AoO, each pushed enemy suffers 2 dice attack (armour applies). Then make Move action
                        </div>
                    </div>
                </div>

                <div class="action-card" data-skill="reflexes">
                    <select class="skill-select" onchange="updateSkill('reflexes', this.value)">
                        <option value="0">Not Learned</option>
                        <option value="1">Level 1</option>
                        <option value="2">Level 2</option>
                        <option value="3">Level 3</option>
                    </select>
                    <div class="action-card-title">Reflexes</div>
                    <div class="action-requirements">Reaction - defensive counter</div>
                    <div>
                        <div class="skill-level" data-level="passive">
                            <span class="level-label" data-level="passive">Trigger:</span>
                            After targeted with close assault attack
                        </div>
                        <div class="skill-level" data-level="1">
                            <span class="level-label" data-level="1">Level 1:</span>
                            Ignore all hits scored
                        </div>
                        <div class="skill-level" data-level="2">
                            <span class="level-label" data-level="2">Level 2:</span>
                            Ignore all hits + immediate Close Assault against attacker, rolling 1 additional die
                        </div>
                        <div class="skill-level" data-level="3">
                            <span class="level-label" data-level="3">Level 3:</span>
                            Ignore all hits + immediate Close Assault (roll 2 additional dice) + Move (no attacks of opportunity)
                        </div>
                    </div>
                </div>

                <div class="action-card" data-skill="walkitoff">
                    <select class="skill-select" onchange="updateSkill('walkitoff', this.value)">
                        <option value="0">Not Learned</option>
                        <option value="1">Level 1</option>
                        <option value="2">Level 2</option>
                        <option value="3">Level 3</option>
                    </select>
                    <div class="action-card-title">Walk It Off</div>
                    <div class="action-requirements">Active + Reaction - endurance</div>
                    <div>
                        <div class="skill-level" data-level="1">
                            <span class="level-label" data-level="1">Level 1:</span>
                            Restore 1 Health
                        </div>
                        <div class="skill-level" data-level="2">
                            <span class="level-label" data-level="2">Level 2:</span>
                            Reaction: After targeted with attack, reduce damage sustained by 2
                        </div>
                        <div class="skill-level" data-level="3">
                            <span class="level-label" data-level="3">Level 3:</span>
                            Reaction: After defeated, no longer defeated - restore 1 Health, Stand Up, may then make Move action
                        </div>
                    </div>
                </div>

                <div class="action-card" data-skill="stubborn">
                    <select class="skill-select" onchange="updateSkill('stubborn', this.value)">
                        <option value="0">Not Learned</option>
                        <option value="1">Level 1</option>
                        <option value="2">Level 2</option>
                    </select>
                    <div class="action-card-title">Stubborn</div>
                    <div class="action-requirements">Active - resilience</div>
                    <div>
                        <div class="skill-level" data-level="1">
                            <span class="level-label" data-level="1">Level 1:</span>
                            Make a Move action
                        </div>
                        <div class="skill-level" data-level="2">
                            <span class="level-label" data-level="2">Level 2:</span>
                            Make Move action followed by an Assault action
                        </div>
                    </div>
                </div>

            </div>
        </div>

        <footer>
            <div class="guide-links">
                <a href="index.html" class="guide-link">‚Üê Back to Hub</a>
                <a href="advancement.html" class="guide-link">View All Skills</a>
            </div>
        </footer>
    </div>

    <script>
        const CHARACTER = 'cassie';

        function updateSkill(skillName, level) {
            level = parseInt(level);
            localStorage.setItem(`${CHARACTER}-${skillName}`, level);

            const card = document.querySelector(`[data-skill="${skillName}"]`);
            const skillLevels = card.querySelectorAll('.skill-level');

            if (level === 0) {
                card.classList.add('not-learned');
            } else {
                card.classList.remove('not-learned');
            }

            skillLevels.forEach(levelDiv => {
                const divLevel = levelDiv.getAttribute('data-level');

                if (divLevel === 'passive') {
                    if (level > 0) {
                        levelDiv.classList.remove('hidden');
                    } else {
                        levelDiv.classList.add('hidden');
                    }
                } else {
                    const divLevelNum = parseInt(divLevel);
                    if (divLevelNum <= level) {
                        levelDiv.classList.remove('hidden');
                    } else {
                        levelDiv.classList.add('hidden');
                    }
                }
            });

            // Update passive skills summary
            updatePassiveSummary();
            // Update reaction skills summary
            updateReactionSummary();
        }

        function updatePassiveSummary() {
            const passiveItems = document.querySelectorAll('#passive-skills-list .passive-item');
            let hasAnyPassive = false;

            passiveItems.forEach(item => {
                const skillName = item.getAttribute('data-skill');
                const minLevel = parseInt(item.getAttribute('data-min-level'));
                const currentLevel = parseInt(localStorage.getItem(`${CHARACTER}-${skillName}`) || '0');

                if (currentLevel >= minLevel) {
                    item.style.display = '';
                    hasAnyPassive = true;
                } else {
                    item.style.display = 'none';
                }
            });

            const noPassivesMsg = document.getElementById('no-passives');
            if (hasAnyPassive) {
                noPassivesMsg.style.display = 'none';
            } else {
                noPassivesMsg.style.display = 'block';
            }
        }

        function updateReactionSummary() {
            const reactionItems = document.querySelectorAll('#reaction-skills-list .passive-item');
            let hasAnyReaction = false;

            reactionItems.forEach(item => {
                const skillName = item.getAttribute('data-skill');
                const minLevel = parseInt(item.getAttribute('data-min-level'));
                const currentLevel = parseInt(localStorage.getItem(`${CHARACTER}-${skillName}`) || '0');

                if (currentLevel >= minLevel) {
                    item.style.display = '';
                    hasAnyReaction = true;
                } else {
                    item.style.display = 'none';
                }
            });

            const noReactionsMsg = document.getElementById('no-reactions');
            if (hasAnyReaction) {
                noReactionsMsg.style.display = 'none';
            } else {
                noReactionsMsg.style.display = 'block';
            }
        }

        function resetAll() {
            if (!confirm('Reset all skills to "Not Learned"? This cannot be undone.')) {
                return;
            }

            const cards = document.querySelectorAll('[data-skill]');
            cards.forEach(card => {
                const skillName = card.getAttribute('data-skill');
                const select = card.querySelector('select');
                select.value = '0';
                updateSkill(skillName, 0);
            });
        }

        window.addEventListener('DOMContentLoaded', () => {
            const cards = document.querySelectorAll('[data-skill]');
            cards.forEach(card => {
                const skillName = card.getAttribute('data-skill');
                const savedLevel = localStorage.getItem(`${CHARACTER}-${skillName}`) || '0';
                const select = card.querySelector('select');
                select.value = savedLevel;
                updateSkill(skillName, savedLevel);
            });

            // Initial passive and reaction summary updates
            updatePassiveSummary();
            updateReactionSummary();
        });
    </script>
</body>
</html>
